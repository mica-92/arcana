<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcana</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="icon" type="image/png" href="blue.png">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tus estilos -->
    <link rel="stylesheet" href="charts.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="astrology_section.css">
    <link rel="stylesheet" href="historial.css">
    <link rel="stylesheet" href="stats.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="animation.css">
        <link rel="stylesheet" href="ultimo.css">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1742ab">
<!-- Agrega esto en el <head> -->
<meta name="application-name" content="Arcana Tarot">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Arcana Tarot">
<meta name="mobile-web-app-capable" content="yes">
<meta name="msapplication-TileColor" content="#1742ab">
<meta name="msapplication-tap-highlight" content="no">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Fraunces:ital,opsz,wght@0,9..144,100..900;1,9..144,100..900&family=Inconsolata&family=Roboto+Serif:ital,opsz,wght@0,8..144,100..900;1,8..144,100..900&family=Special+Elite&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900,400italic,700italic,900italic|Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<style>
    @font-face {
    font-family: 'Astronomicon';
    src: url('Astronomicon.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap; /* Para mejor rendimiento de carga */
}
</style>

</head>

<body>    
<div class="outer-border">

    <div id="loading-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--primary-color);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        flex-direction: column;
        border: 5px solid #fff;
    ">
        <img src="cat.png" alt="Logo" style="
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            transition: transform 0.5s ease;
        " id="loading-logo">
        <h1 style="color: var(--background-color); margin: 5px; font-family: 'Roboto Serif';">CARGANDO</h1>
        <h1 style="color: var(--background-color); margin: 5px; font-family: 'Roboto Serif';">ARCANA</h1>
    </div>

    <header >
        <div class="logo">
            <img src="cat.png" alt="Logo ARCANA" style="width: 50px; height: 50px; display: block;">
        </div>
        <h1 style="margin: 0; display: flex; align-items: center; height: 50px;">ARCANA</h1>
    </header>

        <div class="charts-section">       
            <div class="charts-carousel">
                <div class="charts-track">

                    <div class="chart-category">
                        <!-- main.js -->
                        <div class="daily-card-section" >
                            <div id="daily-card-status">
                                <!-- La información de la carta del día se cargará aquí -->
                            </div>
                        </div>
                            <div id="astrology-info">
                                <!-- La información astrológica se cargará aquí -->
                            </div>
                    </div>

                    <div class="chart-category">
                        <div class="history-title">
                            Carta del Día:
                        </div>
                        
                        <div class="astro-card-header" style="padding:0; font-size: 1rem;">
                            estadísticas generales</div>

                        <div class="unique-card">
                            <div class="stat-card">
                                <div class="stat-value" id="total-entries" style="color: var(--primary80) !important;">0</div>
                                <div class="stat-label" style="color: var(--primary-color) !important;">
                                    <div class="stat-icon" style="color: var(--primary-color) !important;"><i class="fa-solid fa-sun"></i></div><br> 
                                    Registros Diarios
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="unique-cards" style="color: var(--primary80) !important;">0</div>
                                <div class="stat-label" style="color: var(--primary-color) !important;">
                                    <div class="stat-icon" style="color: var(--primary-color) !important;"><i class="fa-solid fa-hand-spock"></i></div><br> 
                                    Cartas Únicas
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="most-frequent-name" style="color: var(--primary80) !important;">-</div>
                                <div class="stat-label" style="color: var(--primary-color) !important;">
                                    <div class="stat-icon" style="color: var(--primary-color) !important;"><i class="fa-solid fa-crown"></i></div><br>
                                    <span id="most-frequent-count">Apareció 0 veces</span>
                                </div>
                            </div>
                        </div>

                        <div class="history-title">Bitácora</div>
                        <div class="astro-card-header" style="padding:0; font-size: 1rem;">cartas del día & de tiradas</div>

                        <div class="log-history">
                            <div class="history-tabs">
                                <button class="history-tab active" data-tab="daily"><i class="fa-solid fa-seedling"></i> Dia</button>
                                <button class="history-tab" data-tab="spread"><i class="fa-solid fa-leaf"></i> Tiradas</button>
                                <button class="history-tab " data-tab="all"><i class="fa-solid fa-tree"></i> Todos</button>
                            </div>
                            <div class="history-borde">
                                <div class="history-content">
                                    <div id="log-history">
                                        <!-- Las entradas anteriores se mostrarán aquí -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-category">
                        <div class="history-title">Arcane Analysis</div>
                        <div class="history-headline">estadísticas de las cartas del día</div>

                        <div class="stats-periods">
                            <button class="period-btn active" data-period="all"><i class="fa-solid fa-infinity"></i> Siempre</button>
                            <button class="period-btn" data-period="month"><i class="fa-solid fa-fish"></i> Este Mes</button>
                            <button class="period-btn" data-period="week"><i class="fa-solid fa-fish-fins"></i> Esta Semana</button>
                            <button class="period-btn" id="custom-period-btn" data-period="custom">
                                <i class="fa-solid fa-frog"></i> Otro Período
                            </button>
                        </div>

                        <!-- NUEVO: Contenedor con scroll para gráficos -->
                        <div class="container-graphs">
                                <div class="history-title">TODOS LOS ARCANOS</div>


                            <div class="chart-title">por Orientación</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="orientation-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="orientation-legend"></div>
                            </div>

                            <div class="chart-title">por Tipos</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="types-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="types-legend"></div>
                            </div>

                            <div class="chart-title">por Elementos</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="elements-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="elements-legend"></div>
                            </div>

                            <div class="chart-title">por Planetas</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="planets-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="planets-legend"></div>
                            </div>

                            <div class="chart-title">por Signos</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="signs-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="signs-legend"></div>
                            </div>

                            <div class="chart-title">por Numerología</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="numerology-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="numerology-legend"></div>
                            </div>

                            <div class="history-title">Arcanos Mayores</div>
                            <div class="chart-title">por Septenary</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="septenary-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="septenary-legend"></div>
                            </div>

                            <div class="chart-title">por Vertical</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="vertical-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="vertical-legend"></div>
                            </div>

                            <div class="history-title">Arcanos Menores</div>
                            <div class="chart-title">por Palos</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="suits-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="suits-legend"></div>
                            </div>

                            <div class="history-title">Arcanos de la Corte</div>
                            <div class="chart-title">por Rango</div>
                            <div class="charts-row">
                                <div class="chart-container">
                                    <canvas id="court-types-chart" width="300" height="300"></canvas>
                                </div>
                                <div class="chart-legend" id="court-types-legend"></div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-category">
                        <div class="history-title">GUÍA DE TAROT</div>
                        <div class="history-headline">información completa de todas las cartas</div>
                        
                        <div class="tarot-guide-container" id="tarot-guide-container">
                            <!-- Las cartas se cargarán dinámicamente aquí -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <div class="stats-borde" style="display: none; margin: auto; margin-top:20px;">
            <!-- Tarjetas de estadísticas -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-value" id="total-entries">0</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-sun"></i></div><br> Registros Diarios</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="unique-cards">0</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-hand-spock"></i></div><br> Cartas Únicas</div>
                </div>
                <div class="stat-card" style="display:none">
                    <div class="stat-value" id="upright-percent">0%</div>
                    <div class="stat-label">En Derecha</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="reversed-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-arrow-rotate-left"></i></div><br> Reversas</div>
                </div>
            </div>

            <!-- Estadísticas de Palos -->
            <div class="stats-cards" style="border-top: 2px solid var(--primary80)" >
                <div class="stat-card">
                    <div class="stat-value" id="major-arcana-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-infinity"></i></div><br> Arcanos Mayores</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="court-cards-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-crown"></i></div><br>Corte</div>
                </div>

                <div class="stat-card">
                    <div class="stat-value" id="wands-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-wand-sparkles"></i></div><br>Bastos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="cups-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-wine-glass"></i></div><br>Copas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="swords-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-bolt-lightning"></i></div><br>Espadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pentacles-percent">0%</div>
                    <div class="stat-label"><div class="stat-icon"><i class="fa-solid fa-coins"></i></div><br>Pentáculos</div>
                </div>
            </div>

            <!-- Estadísticas de Elementos -->
            <div class="stats-cards" style="border-top: 2px solid var(--primary80)">
                <div class="stat-card">
                    <div class="stat-value" id="fire-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">±</div><br>Fuego</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="water-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">³</div><br>Agua</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="air-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">²</div><br>Aire</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="earth-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">´</div><br>Tierra</div>
                </div>
            </div>

            <!-- Estadísticas de Planetas -->
            <div class="stats-cards" style="border-top: 2px solid var(--primary80)">
                <div class="stat-card">
                    <div class="stat-value" id="sun-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">Q</div><br>Sol</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="moon-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">R</div><br>Luna</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mercury-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">S</div><br>Mercurio</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="venus-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">T</div><br>Venus</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mars-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">U</div><br>Marte</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="jupiter-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">V</div><br>Júpiter</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="saturn-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">W</div><br>Saturno</div>
                </div>
            </div>

            <!-- Estadísticas de Signos Zodiacales -->
            <div class="stats-cards" style="border-top: 2px solid var(--primary80)">
                <div class="stat-card">
                    <div class="stat-value" id="aries-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">A</div><br>Aries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="taurus-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">B</div><br>Tauro</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="gemini-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">C</div><br>Géminis</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="cancer-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">D</div><br>Cáncer</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="leo-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">E</div><br>Leo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="virgo-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">F</div><br>Virgo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="libra-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">G</div><br>Libra</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="scorpio-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">H</div><br>Escorpio</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="sagittarius-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">I</div><br>Sagitario</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="capricorn-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">J</div><br>Capricornio</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="aquarius-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">K</div><br>Acuario</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pisces-percent">0%</div>
                    <div class="stat-label"><div class="stat-astro">L</div><br>Piscis</div>
                </div>
            </div>
        </div>

        <!-- Modal para seleccionar período personalizado -->
        <div class="period-selector-modal" id="period-selector-modal">
            <div class="period-selector-content">
                <div class="period-selector-header">
                    <div class="period-selector-title"><i class="fa-solid fa-frog"></i> Otro Periodo</div>
                    <button class="period-selector-close" id="period-selector-close">&times;</button>
                </div>
                <div class="period-selector-options">
                    <div class="period-selector-option">
                        <label>Periodo:</label>
                        <select id="custom-period-type">
                            <option value="year">Anual</option>
                            <option value="month">Mensual</option>
                            <option value="week">Semanal</option>
                        </select>
                    </div>
                    <div class="period-selector-option">
                        <label>Año:</label>
                        <select id="custom-year">
                            <!-- Los años se cargarán dinámicamente -->
                        </select>
                    </div>
                    <div class="period-selector-option" id="custom-month-container" style="display: none;">
                        <label>Mes:</label>
                        <select id="custom-month">
                            <option value="1">Enero</option>
                            <option value="2">Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    <div class="period-selector-option" id="custom-week-container" style="display: none;">
                        <label>Semana:</label>
                        <select id="custom-week">
                            <!-- Las semanas se cargarán dinámicamente -->
                        </select>
                    </div>
                </div>
                <div class="period-selector-actions">
                    <button class="btn-secondary" id="period-selector-cancel">Cancelar</button>
                    <button class="btn-primary" id="period-selector-apply">Aplicar</button>
                </div>
            </div>
        </div>

    <!-- Footer fijo con formularios separados -->
    <footer class="app-footer">
        <div class="footer-credit">
            Creado por Mica - desde buenos aires
        </div>
 
        <div class="footer-menu">
            <button class="burger-btn" id="burger-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="footer-menu-options" id="footer-menu-options">
                <!-- 4 BOTONES SEPARADOS COMO SOLICITADO -->
                <div class="footer-menu-option" id="new-daily-card">
                    <i class="fas fa-dog"></i>
                    <span>Carta del Día</span>
                </div>
                <div class="footer-menu-option" id="new-spread">
                    <i class="fas fa-cat"></i>
                    <span>Otras Tiradas</span>
                </div>
                <div class="footer-menu-option" id="manage-decks">
                    <i class="fas fa-cog"></i>
                    <span>Administrar: Mazos</span>
                </div>
                <div class="footer-menu-option" id="manage-spreads">
                    <i class="fas fa-cog"></i>
                    <span>Administar: Tiradas</span>
                </div>
            </div>
        </div>
    </footer>

</div>


<!-- Agregar esto justo antes del cierre del body -->
<div class="floating-controls">
    <button class="brutalist-btn prev-btn" aria-label="Slide anterior">
        <i class="fas fa-chevron-left"></i>
    </button>
    <button class="brutalist-btn next-btn" aria-label="Slide siguiente">
        <i class="fas fa-chevron-right"></i>
    </button>
    <button class="brutalist-btn menu-btn" id="floating-menu-btn" aria-label="Menú">
        <i class="fas fa-bars"></i>
    </button>
</div>

<!-- Indicador de posición (opcional) -->
<div class="carousel-position-indicator">
    Slide <span id="current-slide">1</span>/<span id="total-slides">11</span>
</div>

<!-- Menú flotante -->
<div class="floating-menu" id="floating-menu">
    <div class="floating-menu-option" id="floating-new-daily">
        <i class="fas fa-dog"></i>
        <span>Carta del Día</span>
    </div>
    <div class="floating-menu-option" id="floating-new-spread">
        <i class="fas fa-cat"></i>
        <span>Otras Tiradas</span>
    </div>
    <div class="floating-menu-option" id="floating-manage-decks">
        <i class="fas fa-cog"></i>
        <span>Mazos</span>
    </div>
    <div class="floating-menu-option" id="floating-manage-spreads">
        <i class="fas fa-cog"></i>
        <span>Tiradas</span>
    </div>
</div>


<script>

// ===== INICIALIZACIÓN DEL FORMULARIO DE TIRADAS =====


document.addEventListener('DOMContentLoaded', function() {
    const loadingScreen = document.getElementById('loading-screen');
    const loadingLogo = document.getElementById('loading-logo');
    let pulseCount = 0;
    
    function pulseAnimation() {
        if (pulseCount < 2) {
            // Aumentar
            loadingLogo.style.transform = 'scale(1.3)';
            setTimeout(() => {
                // Disminuir
                loadingLogo.style.transform = 'scale(1)';
                pulseCount++;
                setTimeout(pulseAnimation, 500);
            }, 200);
        } else {
            // Ir a la página después de las pulsaciones
            setTimeout(() => {
                loadingScreen.style.transition = 'opacity 0.3s ease';
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 200);
            }, 200);
        }
    }
    
    // Iniciar la animación
    setTimeout(pulseAnimation, 20);
});


    const font = new FontFace('Astronomicon', 'url(Astronomicon.ttf)');
    font.load().then(function(loadedFont) {
        document.fonts.add(loadedFont);
        console.log('Fuente Astronomicon cargada correctamente');
    }).catch(function(error) {
        console.error('Error cargando fuente:', error);
    });
</script>

<!-- Este orden es importante -->
<script src="initialization.js"></script>
<script src="astrology_section.js"></script>
<script src="data.js"></script>
<script src="main.js"></script>

<!-- PRIMERO dailycard.js porque funciona -->
<script src="dailycard.js"></script>

<!-- LUEGO spread.js que depende de dailycard.js -->
<script src="spread.js"></script>

<!-- FINALMENTE footer.js que usa ambos -->
<script src="footer.js"></script>
<!-- Agregar después de los otros scripts -->
<script src="tarotguide.js"></script>

<script src="stats.js"></script>
<script src="historylog.js"></script>
<script src="charts.js"></script>
<script src="deck.js"></script>
<script src="spreadinfomodal.js"></script>
<script src="utility.js"></script>
<script src="eventlisteners.js"></script>

</body>
</html>